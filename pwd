#!/usr/bin/python3
import os
import sys

# Default to -L behavior
use_physical = False
# Parse flags
args = sys.argv[1:]
for arg in args:
    if arg == "-P":
        use_physical = True
    elif arg == "-L":
        use_physical = False
    else:
        # POSIX: pwd has no operands
        print(f"pwd: invalid argument {arg}", file=sys.stderr)
        sys.exit(1)
try:
    if use_physical:
        # Physical path, no symlinks
        print(os.path.realpath(os.getcwd()))
    else:
        # Logical path, honor PWD env if valid
        pwd_env = os.environ.get("PWD")
        if pwd_env and os.path.isabs(pwd_env):
            print(pwd_env)
        else:
            # fallback to physical path
            print(os.path.realpath(os.getcwd()))
    sys.exit(0)
except Exception as e:
    print(f"pwd: {e}", file=sys.stderr)
    sys.exit(1)
