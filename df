#!/usr/bin/env python3
import os
import sys

files = sys.argv[1:] or ["/"]  # default to all ("/") for demo
use_1024 = True  # simulate -k
blocksize = 1024 if use_1024 else 512

for f in files:
    try:
        stats = os.statvfs(f)
        total = (stats.f_blocks * stats.f_frsize + blocksize - 1) // blocksize
        free = (stats.f_bavail * stats.f_frsize + blocksize - 1) // blocksize
        used = total - free
        percent = (used * 100 + free - 1) // (used + free)
        print(f"{f:15} {total:8} {used:8} {free:8} {percent:3}% {f}")
    except Exception as e:
        print(f"df: cannot access '{f}': {e}", file=sys.stderr)
